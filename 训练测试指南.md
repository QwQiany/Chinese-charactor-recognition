# æ‰‹å†™æ±‰å­—è¯†åˆ«æ¨¡å‹è®­ç»ƒæµ‹è¯•æŒ‡å—

## ç¯å¢ƒä¿¡æ¯

**äº‘å®¹å™¨é…ç½®**ï¼šUbuntu 20.04.5 LTSã€16vCPUï¼ˆIntel Xeon Gold 6430ï¼‰ã€RTX 4090ã€1å¡ * 24 GBæ˜¾å­˜

**è½¯ä»¶ç¯å¢ƒ**ï¼šPython 3.8.10ã€PyTorch 2.0.0+cu118ã€CUDA 11.8.89ã€cuDNN 8700

## å‰ç½®å‡†å¤‡

ç¡®ä¿å·²å®Œæˆï¼š
- âœ… æ•°æ®é›†å·²å‡†å¤‡ï¼ˆ240ä¸ªè®­ç»ƒæ–‡ä»¶ï¼Œ60ä¸ªæµ‹è¯•æ–‡ä»¶ï¼‰
- âœ… å­—å…¸æ–‡ä»¶å·²ç”Ÿæˆï¼ˆ`./data/char_dict`ï¼‰
- âœ… æ‰€æœ‰ä¾èµ–å·²å®‰è£…

## è®­ç»ƒå’Œæµ‹è¯•æµç¨‹

### æ¨¡å‹1ï¼šResNetï¼ˆåŸºç¡€ç‰ˆï¼‰

```bash
# è®­ç»ƒ ResNet
nohup python train.py --model ResNet --epochs 50 --batch_size 512 --lr 0.01 > train_ResNet.log 2>&1 &
wait

# æµ‹è¯• ResNet
python test.py --model ResNet | tee test_ResNet.log

# å¤‡ä»½æ¨¡å‹ï¼ˆé‡è¦ï¼ï¼‰
cp ./result/param/model.pth ./result/param/ResNet_model.pth

# è¯†åˆ«æµ‹è¯•ï¼ˆå¯é€‰ï¼‰
# å•å­—ç¬¦è¯†åˆ«
python recognize.py

# å¤šå­—ç¬¦è¯†åˆ«
python mul_char.py
python recognize.py
```

---

### æ¨¡å‹2ï¼šResNetï¼ˆæ•°æ®å¢å¼ºç‰ˆï¼‰

**é‡è¦ï¼šè®­ç»ƒå‰éœ€è¦ä¿®æ”¹ä»£ç **

ä¿®æ”¹ `train.py` ç¬¬16è¡Œï¼š
```python
# ä¿®æ”¹å‰
train_set = MyDataset(args.root + '/HWDB1.1trn_gnt', transforms=transform, augment=False)

# ä¿®æ”¹å
train_set = MyDataset(args.root + '/HWDB1.1trn_gnt', transforms=transform, augment=True)
```

```bash
# è®­ç»ƒ ResNetï¼ˆå¢å¼ºç‰ˆï¼‰
nohup python train.py --model ResNet --epochs 50 --batch_size 512 --lr 0.01 > train_ResNet_aug.log 2>&1 &
wait

# æµ‹è¯• ResNetï¼ˆå¢å¼ºç‰ˆï¼‰
python test.py --model ResNet | tee test_ResNet_aug.log

# å¤‡ä»½æ¨¡å‹ï¼ˆé‡è¦ï¼ï¼‰
cp ./result/param/model.pth ./result/param/ResNet_aug_model.pth

# è¯†åˆ«æµ‹è¯•ï¼ˆå¯é€‰ï¼‰
# å•å­—ç¬¦è¯†åˆ«
python recognize.py

# å¤šå­—ç¬¦è¯†åˆ«
python mul_char.py
python recognize.py
```

**è®­ç»ƒå®Œæˆåï¼Œè®°å¾—æ”¹å› augment=False**

---

### æ¨¡å‹3ï¼šVGG

```bash
# è®­ç»ƒ VGG
nohup python train.py --model VGG --epochs 50 --batch_size 512 --lr 0.01 > train_VGG.log 2>&1 &
wait

# æµ‹è¯• VGG
python test.py --model VGG | tee test_VGG.log

# å¤‡ä»½æ¨¡å‹ï¼ˆé‡è¦ï¼ï¼‰
cp ./result/param/model.pth ./result/param/VGG_model.pth

# è¯†åˆ«æµ‹è¯•ï¼ˆå¯é€‰ï¼‰
# å•å­—ç¬¦è¯†åˆ«
python recognize.py

# å¤šå­—ç¬¦è¯†åˆ«
python mul_char.py
python recognize.py
```

---

### æ¨¡å‹4ï¼šLeNet

```bash
# è®­ç»ƒ LeNet
nohup python train.py --model LeNet --epochs 50 --batch_size 512 --lr 0.01 > train_LeNet.log 2>&1 &
wait

# æµ‹è¯• LeNet
python test.py --model LeNet | tee test_LeNet.log

# å¤‡ä»½æ¨¡å‹ï¼ˆé‡è¦ï¼ï¼‰
cp ./result/param/model.pth ./result/param/LeNet_model.pth

# è¯†åˆ«æµ‹è¯•ï¼ˆå¯é€‰ï¼‰
# å•å­—ç¬¦è¯†åˆ«
python recognize.py

# å¤šå­—ç¬¦è¯†åˆ«
python mul_char.py
python recognize.py
```

---

### æ¨¡å‹5ï¼šCNN

```bash
# è®­ç»ƒ CNN
nohup python train.py --model CNN --epochs 50 --batch_size 512 --lr 0.01 > train_CNN.log 2>&1 &
wait

# æµ‹è¯• CNN
python test.py --model CNN | tee test_CNN.log

# å¤‡ä»½æ¨¡å‹ï¼ˆé‡è¦ï¼ï¼‰
cp ./result/param/model.pth ./result/param/CNN_model.pth

# æ³¨æ„ï¼šCNNæ¨¡å‹ä¸æ”¯æŒ recognize.py è¯†åˆ«åŠŸèƒ½
```

---

### æ¨¡å‹6ï¼šResNet18

```bash
# è®­ç»ƒ ResNet18
nohup python train.py --model ResNet18 --epochs 50 --batch_size 512 --lr 0.01 > train_ResNet18.log 2>&1 &
wait

# æµ‹è¯• ResNet18
python test.py --model ResNet18 | tee test_ResNet18.log

# å¤‡ä»½æ¨¡å‹ï¼ˆé‡è¦ï¼ï¼‰
cp ./result/param/model.pth ./result/param/ResNet18_model.pth

# æ³¨æ„ï¼šResNet18æ¨¡å‹ä¸æ”¯æŒ recognize.py è¯†åˆ«åŠŸèƒ½
```

---

### æ¨¡å‹7ï¼šResNet34

```bash
# è®­ç»ƒ ResNet34
nohup python train.py --model ResNet34 --epochs 50 --batch_size 512 --lr 0.01 > train_ResNet34.log 2>&1 &
wait

# æµ‹è¯• ResNet34
python test.py --model ResNet34 | tee test_ResNet34.log

# å¤‡ä»½æ¨¡å‹ï¼ˆé‡è¦ï¼ï¼‰
cp ./result/param/model.pth ./result/param/ResNet34_model.pth

# æ³¨æ„ï¼šResNet34æ¨¡å‹ä¸æ”¯æŒ recognize.py è¯†åˆ«åŠŸèƒ½
```

---

## ç›‘æ§å’ŒæŸ¥çœ‹

### æŸ¥çœ‹è®­ç»ƒè¿›åº¦
```bash
# å®æ—¶æŸ¥çœ‹æ—¥å¿—
tail -f train_ResNet.log

# æŸ¥çœ‹GPUä½¿ç”¨æƒ…å†µ
watch -n 1 nvidia-smi

# æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„è®­ç»ƒä»»åŠ¡
ps aux | grep train.py
```

### æŸ¥çœ‹è®­ç»ƒç»“æœ
```bash
# æŸ¥çœ‹è®­ç»ƒæ›²çº¿å›¾
ls -lh ./result/fig/

# æŸ¥çœ‹æ‰€æœ‰å¤‡ä»½çš„æ¨¡å‹
ls -lh ./result/param/
```

---

## ç»“æœæ•´ç†

è®­ç»ƒå®Œæˆåï¼Œæ‚¨å°†å¾—åˆ°ï¼š

**æ¨¡å‹æ–‡ä»¶**ï¼ˆéœ€æ‰‹åŠ¨å¤‡ä»½ï¼‰ï¼š
- `./result/param/ResNet_model.pth`
- `./result/param/ResNet_aug_model.pth`
- `./result/param/VGG_model.pth`
- `./result/param/LeNet_model.pth`
- `./result/param/CNN_model.pth`
- `./result/param/ResNet18_model.pth`
- `./result/param/ResNet34_model.pth`

**è®­ç»ƒæ›²çº¿å›¾**ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰ï¼š
- `./result/fig/ResNet`
- `./result/fig/VGG`
- `./result/fig/LeNet`
- `./result/fig/CNN`
- `./result/fig/ResNet18`
- `./result/fig/ResNet34`

**æ—¥å¿—æ–‡ä»¶**ï¼š
- `train_*.log` - è®­ç»ƒæ—¥å¿—
- `test_*.log` - æµ‹è¯•ç»“æœ

---

## å®Œæ•´æ–‡ä»¶ç›®å½•ç»“æ„

æŒ‰ç…§æœ¬æŒ‡å—å®Œæˆæ‰€æœ‰è®­ç»ƒå’Œæµ‹è¯•åï¼Œæ‚¨çš„é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

### é¡¹ç›®æ ¹ç›®å½•

```
/root/Chinese-charactor-recognition/
â”‚
â”œâ”€â”€ è®­ç»ƒæ—¥å¿—æ–‡ä»¶
â”‚   â”œâ”€â”€ train_ResNet.log              # ResNet åŸºç¡€ç‰ˆè®­ç»ƒæ—¥å¿—
â”‚   â”œâ”€â”€ train_ResNet_aug.log          # ResNet å¢å¼ºç‰ˆè®­ç»ƒæ—¥å¿—
â”‚   â”œâ”€â”€ train_VGG.log                 # VGG è®­ç»ƒæ—¥å¿—
â”‚   â”œâ”€â”€ train_LeNet.log               # LeNet è®­ç»ƒæ—¥å¿—
â”‚   â”œâ”€â”€ train_CNN.log                 # CNN è®­ç»ƒæ—¥å¿—
â”‚   â”œâ”€â”€ train_ResNet18.log            # ResNet18 è®­ç»ƒæ—¥å¿—
â”‚   â””â”€â”€ train_ResNet34.log            # ResNet34 è®­ç»ƒæ—¥å¿—
â”‚
â”œâ”€â”€ æµ‹è¯•æ—¥å¿—æ–‡ä»¶
â”‚   â”œâ”€â”€ test_ResNet.log               # ResNet åŸºç¡€ç‰ˆæµ‹è¯•ç»“æœ
â”‚   â”œâ”€â”€ test_ResNet_aug.log           # ResNet å¢å¼ºç‰ˆæµ‹è¯•ç»“æœ
â”‚   â”œâ”€â”€ test_VGG.log                  # VGG æµ‹è¯•ç»“æœ
â”‚   â”œâ”€â”€ test_LeNet.log                # LeNet æµ‹è¯•ç»“æœ
â”‚   â”œâ”€â”€ test_CNN.log                  # CNN æµ‹è¯•ç»“æœ
â”‚   â”œâ”€â”€ test_ResNet18.log             # ResNet18 æµ‹è¯•ç»“æœ
â”‚   â””â”€â”€ test_ResNet34.log             # ResNet34 æµ‹è¯•ç»“æœ
â”‚
â””â”€â”€ è¯†åˆ«æ—¥å¿—æ–‡ä»¶ï¼ˆå¦‚æœä½¿ç”¨ | tee ä¿å­˜ï¼‰
    â”œâ”€â”€ recognize_ResNet.log          # ResNet åŸºç¡€ç‰ˆè¯†åˆ«ç»“æœï¼ˆå¯é€‰ï¼‰
    â”œâ”€â”€ recognize_ResNet_aug.log      # ResNet å¢å¼ºç‰ˆè¯†åˆ«ç»“æœï¼ˆå¯é€‰ï¼‰
    â”œâ”€â”€ recognize_VGG.log             # VGG è¯†åˆ«ç»“æœï¼ˆå¯é€‰ï¼‰
    â””â”€â”€ recognize_LeNet.log           # LeNet è¯†åˆ«ç»“æœï¼ˆå¯é€‰ï¼‰
```

### ./result/ ç›®å½•

```
./result/
â”‚
â”œâ”€â”€ param/                            # æ¨¡å‹å‚æ•°ç›®å½•
â”‚   â”œâ”€â”€ model.pth                     # å½“å‰æ´»è·ƒæ¨¡å‹ï¼ˆæœ€åè®­ç»ƒçš„æ¨¡å‹ï¼‰
â”‚   â”œâ”€â”€ ResNet_model.pth              # ResNet åŸºç¡€ç‰ˆå¤‡ä»½ï¼ˆçº¦ 50 MBï¼‰
â”‚   â”œâ”€â”€ ResNet_aug_model.pth          # ResNet å¢å¼ºç‰ˆå¤‡ä»½ï¼ˆçº¦ 50 MBï¼‰
â”‚   â”œâ”€â”€ VGG_model.pth                 # VGG å¤‡ä»½ï¼ˆçº¦ 60-100 MBï¼‰
â”‚   â”œâ”€â”€ LeNet_model.pth               # LeNet å¤‡ä»½ï¼ˆçº¦ 10-20 MBï¼‰
â”‚   â”œâ”€â”€ CNN_model.pth                 # CNN å¤‡ä»½ï¼ˆçº¦ 20-40 MBï¼‰
â”‚   â”œâ”€â”€ ResNet18_model.pth            # ResNet18 å¤‡ä»½ï¼ˆçº¦ 40-50 MBï¼‰
â”‚   â””â”€â”€ ResNet34_model.pth            # ResNet34 å¤‡ä»½ï¼ˆçº¦ 80-100 MBï¼‰
â”‚
â”œâ”€â”€ fig/                              # è®­ç»ƒæ›²çº¿å›¾ç›®å½•
â”‚   â”œâ”€â”€ ResNet                        # ResNet åŸºç¡€ç‰ˆè®­ç»ƒæ›²çº¿ï¼ˆPNGæ ¼å¼ï¼‰
â”‚   â”œâ”€â”€ ResNet_aug                    # ResNet å¢å¼ºç‰ˆè®­ç»ƒæ›²çº¿ï¼ˆå¦‚æœå•ç‹¬è®­ç»ƒï¼‰
â”‚   â”œâ”€â”€ VGG                           # VGG è®­ç»ƒæ›²çº¿ï¼ˆPNGæ ¼å¼ï¼‰
â”‚   â”œâ”€â”€ LeNet                         # LeNet è®­ç»ƒæ›²çº¿ï¼ˆPNGæ ¼å¼ï¼‰
â”‚   â”œâ”€â”€ CNN                           # CNN è®­ç»ƒæ›²çº¿ï¼ˆPNGæ ¼å¼ï¼‰
â”‚   â”œâ”€â”€ ResNet18                      # ResNet18 è®­ç»ƒæ›²çº¿ï¼ˆPNGæ ¼å¼ï¼‰
â”‚   â””â”€â”€ ResNet34                      # ResNet34 è®­ç»ƒæ›²çº¿ï¼ˆPNGæ ¼å¼ï¼‰
â”‚
â””â”€â”€ output_chars/                     # å­—ç¬¦åˆ†å‰²ç»“æœç›®å½•ï¼ˆå¤šå­—ç¬¦è¯†åˆ«ä½¿ç”¨ï¼‰
    â”œâ”€â”€ char_1.png                    # åˆ†å‰²å‡ºçš„ç¬¬1ä¸ªå­—ç¬¦
    â”œâ”€â”€ char_2.png                    # åˆ†å‰²å‡ºçš„ç¬¬2ä¸ªå­—ç¬¦
    â”œâ”€â”€ char_3.png                    # åˆ†å‰²å‡ºçš„ç¬¬3ä¸ªå­—ç¬¦
    â””â”€â”€ ...                           # æ›´å¤šåˆ†å‰²å­—ç¬¦ï¼ˆæ ¹æ®è¾“å…¥å›¾åƒï¼‰
```

### ./data/ ç›®å½•

```
./data/
â”‚
â”œâ”€â”€ HWDB1.1trn_gnt/                   # è®­ç»ƒæ•°æ®é›†ï¼ˆ240ä¸ª.gntæ–‡ä»¶ï¼‰
â”‚   â”œâ”€â”€ 1001-c.gnt
â”‚   â”œâ”€â”€ 1002-c.gnt
â”‚   â”œâ”€â”€ ...
â”‚   â””â”€â”€ 1240-c.gnt
â”‚
â”œâ”€â”€ HWDB1.1tst_gnt/                   # æµ‹è¯•æ•°æ®é›†ï¼ˆ60ä¸ª.gntæ–‡ä»¶ï¼‰
â”‚   â”œâ”€â”€ 1001-c.gnt
â”‚   â”œâ”€â”€ 1002-c.gnt
â”‚   â”œâ”€â”€ ...
â”‚   â””â”€â”€ 1060-c.gnt
â”‚
â””â”€â”€ char_dict                         # å­—ç¬¦æ˜ å°„å­—å…¸ï¼ˆçº¦ 33 KBï¼‰
```

### ./sentence_img/ ç›®å½•

```
./sentence_img/                       # å¤šå­—ç¬¦è¯†åˆ«è¾“å…¥å›¾åƒ
â””â”€â”€ yyy.png                          # å¾…è¯†åˆ«çš„å¤šå­—ç¬¦å›¾åƒï¼ˆéœ€è‡ªè¡Œå‡†å¤‡ï¼‰
```

### æ–‡ä»¶ç»Ÿè®¡æ€»è§ˆ

**æ¨¡å‹æ–‡ä»¶æ€»å¤§å°**ï¼šçº¦ 310-460 MBï¼ˆ7ä¸ªæ¨¡å‹ + 1ä¸ªæ´»è·ƒæ¨¡å‹ï¼‰

**æ—¥å¿—æ–‡ä»¶æ€»æ•°**ï¼š
- è®­ç»ƒæ—¥å¿—ï¼š7ä¸ª
- æµ‹è¯•æ—¥å¿—ï¼š7ä¸ª
- è¯†åˆ«æ—¥å¿—ï¼š4ä¸ªï¼ˆå¯é€‰ï¼‰

**å›¾åƒæ–‡ä»¶**ï¼š
- è®­ç»ƒæ›²çº¿å›¾ï¼š7ä¸ª
- å­—ç¬¦åˆ†å‰²ç»“æœï¼šæ ¹æ®å¤šå­—ç¬¦å›¾åƒå†…å®¹è€Œå®š

**æ•°æ®é›†**ï¼š
- è®­ç»ƒæ•°æ®ï¼š240ä¸ª.gntæ–‡ä»¶
- æµ‹è¯•æ•°æ®ï¼š60ä¸ª.gntæ–‡ä»¶
- å­—å…¸æ–‡ä»¶ï¼š1ä¸ª

### å®Œæ•´è·¯å¾„ç¤ºä¾‹

```bash
# æ¨¡å‹æ–‡ä»¶
/root/Chinese-charactor-recognition/result/param/ResNet_model.pth

# è®­ç»ƒæ—¥å¿—
/root/Chinese-charactor-recognition/train_ResNet.log

# è®­ç»ƒæ›²çº¿
/root/Chinese-charactor-recognition/result/fig/ResNet

# æµ‹è¯•æ—¥å¿—
/root/Chinese-charactor-recognition/test_ResNet.log

# å­—ç¬¦åˆ†å‰²ç»“æœ
/root/Chinese-charactor-recognition/result/output_chars/char_1.png

# æ•°æ®é›†
/root/Chinese-charactor-recognition/data/HWDB1.1trn_gnt/1001-c.gnt
/root/Chinese-charactor-recognition/data/char_dict
```

### é‡è¦æé†’

1. **æ¨¡å‹æ–‡ä»¶**ï¼šæ¯ä¸ªæ¨¡å‹éœ€è¦æ‰‹åŠ¨å¤‡ä»½ï¼Œå¦åˆ™ä¼šè¢«ä¸‹ä¸€ä¸ªæ¨¡å‹è¦†ç›–
2. **å­—ç¬¦åˆ†å‰²ç»“æœ**ï¼š`./result/output_chars/` ç›®å½•ä¸­çš„æ–‡ä»¶ä¼šåœ¨æ¯æ¬¡è¿è¡Œ `mul_char.py` æ—¶è¢«è¦†ç›–
3. **è®­ç»ƒæ›²çº¿å›¾**ï¼šè‡ªåŠ¨ä¿å­˜ï¼ŒæŒ‰æ¨¡å‹ååŒºåˆ†ï¼Œä¸ä¼šè¦†ç›–
4. **æ—¥å¿—æ–‡ä»¶**ï¼šä½¿ç”¨ä¸åŒæ–‡ä»¶åï¼Œä¸ä¼šäº’ç›¸è¦†ç›–
5. **ç£ç›˜ç©ºé—´**ï¼šå»ºè®®é¢„ç•™è‡³å°‘ 2-3 GB ç©ºé—´ç”¨äºå­˜å‚¨æ‰€æœ‰æ¨¡å‹å’Œæ—¥å¿—

---

## æ³¨æ„äº‹é¡¹

1. **æ¨¡å‹å¤‡ä»½**ï¼šæ¯ä¸ªæ¨¡å‹è®­ç»ƒå®Œæˆåå¿…é¡»ç«‹å³å¤‡ä»½ï¼Œå¦åˆ™ä¼šè¢«ä¸‹ä¸€ä¸ªæ¨¡å‹è¦†ç›–
2. **æ•°æ®å¢å¼º**ï¼šResNetå¢å¼ºç‰ˆè®­ç»ƒæ—¶éœ€è¦ä¿®æ”¹ `train.py` çš„ `augment` å‚æ•°
3. **è¯†åˆ«åŠŸèƒ½**ï¼šåªæœ‰ ResNetã€VGGã€LeNet æ”¯æŒ `recognize.py` è¯†åˆ«åŠŸèƒ½
4. **è®­ç»ƒæ—¶é—´**ï¼šä½¿ç”¨æ ‡å‡†é…ç½® batch_size=512ï¼Œæ¯ä¸ªæ¨¡å‹é¢„è®¡2å°æ—¶ï¼Œæ€»è®¡çº¦14å°æ—¶
5. **è®­ç»ƒé…ç½®**ï¼š
   - æ‰€æœ‰æ¨¡å‹ç»Ÿä¸€ä½¿ç”¨ `batch_size=512 --lr 0.01` æ ‡å‡†é…ç½®
   - æ˜¾å­˜å ç”¨çº¦1-2GBï¼Œéå¸¸ç¨³å®šå®‰å…¨
   - è®­ç»ƒæ›²çº¿å¹³æ»‘ï¼Œå‡†ç¡®ç‡æœ€ä¼˜
   - GPUåˆ©ç”¨ç‡çº¦70%ï¼Œæ˜¾å­˜ä»…å ç”¨çº¦8%
   - RTX 4090 24GBæ˜¾å­˜å®Œå…¨å¤Ÿç”¨ï¼Œå¯æ”¾å¿ƒè®­ç»ƒ

---

## å¿«é€Ÿå‘½ä»¤ç´¢å¼•

```bash
# å¯åŠ¨è®­ç»ƒï¼ˆæ‰€æœ‰æ¨¡å‹ç»Ÿä¸€é…ç½®ï¼‰
nohup python train.py --model [æ¨¡å‹å] --epochs 50 --batch_size 512 --lr 0.01 > train_[æ¨¡å‹å].log 2>&1 &

# æµ‹è¯•æ¨¡å‹
python test.py --model [æ¨¡å‹å] | tee test_[æ¨¡å‹å].log

# å¤‡ä»½æ¨¡å‹
cp ./result/param/model.pth ./result/param/[æ¨¡å‹å]_model.pth

# æŸ¥çœ‹æ—¥å¿—
tail -f train_[æ¨¡å‹å].log

# æŸ¥çœ‹GPUä½¿ç”¨æƒ…å†µ
watch -n 1 nvidia-smi
```

---

## æ¨¡å‹å¤‡ä»½è¯¦è§£

### ğŸ“ å¤‡ä»½åçš„æ–‡ä»¶ä½ç½®

æ‰§è¡Œ `cp ./result/param/model.pth ./result/param/ResNet_model.pth` åï¼š

```
./result/param/
â”œâ”€â”€ model.pth              â† å½“å‰æ´»è·ƒçš„æ¨¡å‹ï¼ˆä¼šè¢«åç»­è®­ç»ƒè¦†ç›–ï¼‰
â””â”€â”€ ResNet_model.pth       â† ResNetçš„å¤‡ä»½ï¼ˆå®‰å…¨ä¿å­˜ï¼Œä¸ä¼šè¢«è¦†ç›–ï¼‰
```

**å®Œæ•´è·¯å¾„**ï¼š`/root/Chinese-charactor-recognition/result/param/ResNet_model.pth`

### ğŸ”„ å¦‚ä½•æ¢å¤å¤‡ä»½

#### æ–¹æ³•1ï¼šæ¢å¤æŸä¸ªå¤‡ä»½æ¨¡å‹è¿›è¡Œæµ‹è¯•

```bash
# å‡è®¾æ‚¨æƒ³æµ‹è¯•ä¹‹å‰å¤‡ä»½çš„ ResNet æ¨¡å‹
cp ./result/param/ResNet_model.pth ./result/param/model.pth
python test.py --model ResNet
```

#### æ–¹æ³•2ï¼šç›´æ¥åŠ è½½å¤‡ä»½æ–‡ä»¶ï¼ˆéœ€ä¿®æ”¹ä»£ç ï¼‰

å¦‚æœä¸æƒ³è¦†ç›– `model.pth`ï¼Œå¯ä»¥ä¸´æ—¶ä¿®æ”¹ `test.py` ç¬¬60è¡Œï¼š
```python
# ä¿®æ”¹å‰
model.load_state_dict(torch.load(args.result + '/param/model.pth', map_location=device))

# ä¿®æ”¹åï¼ˆåŠ è½½ç‰¹å®šå¤‡ä»½ï¼‰
model.load_state_dict(torch.load(args.result + '/param/ResNet_model.pth', map_location=device))
```

### âœ… å¤‡ä»½æ˜¯å¦å½±å“åç»­è®­ç»ƒå’Œæµ‹è¯•ï¼Ÿ

**å®Œå…¨ä¸ä¼šå½±å“ï¼** åŸå› å¦‚ä¸‹ï¼š

#### è®­ç»ƒè¿‡ç¨‹ï¼ˆtrain.pyï¼‰
```python
# ç¬¬70è¡Œï¼šåªå†™å…¥ model.pth
torch.save(model.state_dict(), args.result + '/param/model.pth')
```
- âœ… åªä¼šè¦†ç›– `model.pth`
- âœ… ä¸ä¼šç¢° `ResNet_model.pth` ç­‰å¤‡ä»½æ–‡ä»¶

#### æµ‹è¯•è¿‡ç¨‹ï¼ˆtest.pyï¼‰
```python
# ç¬¬60è¡Œï¼šåªè¯»å– model.pth
model.load_state_dict(torch.load(args.result + '/param/model.pth', map_location=device))
```
- âœ… åªä¼šè¯»å– `model.pth`
- âœ… ä¸ä¼šç¢°å¤‡ä»½æ–‡ä»¶

### ğŸ“Š å®Œæ•´è®­ç»ƒåçš„ç›®å½•ç»“æ„ç¤ºä¾‹

```
./result/param/
â”œâ”€â”€ model.pth              â† æœ€åä¸€ä¸ªè®­ç»ƒçš„æ¨¡å‹ï¼ˆResNet34ï¼‰
â”œâ”€â”€ ResNet_model.pth       â† ResNet åŸºç¡€ç‰ˆå¤‡ä»½ âœ“
â”œâ”€â”€ ResNet_aug_model.pth   â† ResNet å¢å¼ºç‰ˆå¤‡ä»½ âœ“
â”œâ”€â”€ VGG_model.pth          â† VGG å¤‡ä»½ âœ“
â”œâ”€â”€ LeNet_model.pth        â† LeNet å¤‡ä»½ âœ“
â”œâ”€â”€ CNN_model.pth          â† CNN å¤‡ä»½ âœ“
â”œâ”€â”€ ResNet18_model.pth     â† ResNet18 å¤‡ä»½ âœ“
â””â”€â”€ ResNet34_model.pth     â† ResNet34 å¤‡ä»½ âœ“
```

### ğŸ¯ å·¥ä½œæµç¨‹è¯´æ˜

#### è®­ç»ƒ ResNet æ—¶ï¼š
1. `train.py` è®­ç»ƒå®Œæˆ â†’ ä¿å­˜åˆ° `model.pth`
2. æ‚¨æ‰‹åŠ¨æ‰§è¡Œ `cp model.pth ResNet_model.pth` â†’ åˆ›å»ºå¤‡ä»½
3. **æ­¤æ—¶æœ‰2ä¸ªæ–‡ä»¶ï¼Œå†…å®¹ç›¸åŒ**

#### è®­ç»ƒ VGG æ—¶ï¼š
1. `train.py` è®­ç»ƒå®Œæˆ â†’ **è¦†ç›–** `model.pth`ï¼ˆç°åœ¨æ˜¯VGGï¼‰
2. æ‚¨æ‰‹åŠ¨æ‰§è¡Œ `cp model.pth VGG_model.pth` â†’ åˆ›å»ºVGGå¤‡ä»½
3. **æ­¤æ—¶æœ‰3ä¸ªæ–‡ä»¶**ï¼š
   - `model.pth` â† VGGçš„å†…å®¹
   - `ResNet_model.pth` â† ResNetçš„å†…å®¹ï¼ˆå®‰å…¨ä¿å­˜ï¼‰
   - `VGG_model.pth` â† VGGçš„å†…å®¹ï¼ˆå®‰å…¨ä¿å­˜ï¼‰

#### åç»­è®­ç»ƒï¼š
- æ¯æ¬¡æ–°è®­ç»ƒåªä¼šè¦†ç›– `model.pth`
- æ‰€æœ‰å¤‡ä»½æ–‡ä»¶ `*_model.pth` éƒ½å®‰å…¨ä¿å­˜
- äº’ä¸å½±å“ âœ…

### ğŸ’¡ å¤‡ä»½ç®¡ç†å‘½ä»¤

#### æŸ¥çœ‹æ‰€æœ‰å¤‡ä»½æ¨¡å‹
```bash
ls -lh ./result/param/*.pth
```

#### æŸ¥çœ‹å¤‡ä»½æ¨¡å‹ä¿¡æ¯
```bash
# æŸ¥çœ‹æ–‡ä»¶å¤§å°å’Œä¿®æ”¹æ—¶é—´
ls -lh ./result/param/

# ç»Ÿè®¡å¤‡ä»½æ•°é‡
ls ./result/param/*_model.pth | wc -l
```

#### æ‰¹é‡æµ‹è¯•æ‰€æœ‰å¤‡ä»½æ¨¡å‹ï¼ˆå¯é€‰ï¼‰
å¦‚æœæ‚¨æƒ³åœ¨æ‰€æœ‰è®­ç»ƒå®Œæˆåï¼Œé‡æ–°æµ‹è¯•æ‰€æœ‰å¤‡ä»½æ¨¡å‹ï¼š

```bash
# æµ‹è¯• ResNet å¤‡ä»½
cp ./result/param/ResNet_model.pth ./result/param/model.pth
python test.py --model ResNet

# æµ‹è¯• VGG å¤‡ä»½
cp ./result/param/VGG_model.pth ./result/param/model.pth
python test.py --model VGG

# ä¾æ­¤ç±»æ¨...
```

### ğŸ“ å¤‡ä»½æœºåˆ¶æ€»ç»“

âœ… **å¤‡ä»½ä½ç½®**ï¼š`./result/param/[æ¨¡å‹å]_model.pth`  
âœ… **æ¢å¤æ–¹æ³•**ï¼š`cp ./result/param/[å¤‡ä»½å] ./result/param/model.pth`  
âœ… **å½±å“è®­ç»ƒ**ï¼šå®Œå…¨ä¸å½±å“ï¼Œè®­ç»ƒåªæ“ä½œ `model.pth`  
âœ… **å½±å“æµ‹è¯•**ï¼šå®Œå…¨ä¸å½±å“ï¼Œæµ‹è¯•åªè¯»å– `model.pth`  
âœ… **å®‰å…¨æ€§**ï¼šå¤‡ä»½æ–‡ä»¶ç‹¬ç«‹å­˜åœ¨ï¼Œä¸ä¼šè¢«è‡ªåŠ¨è¦†ç›–

**å…³é”®ç‚¹**ï¼š`cp` å‘½ä»¤æ˜¯**å¤åˆ¶**æ“ä½œï¼Œä¸æ˜¯ç§»åŠ¨ï¼Œæ‰€ä»¥ä¸ä¼šå½±å“åŸæ–‡ä»¶æˆ–åç»­æ“ä½œã€‚

